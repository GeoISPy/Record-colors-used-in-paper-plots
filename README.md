# 颜色相关函数说明

本文档概述 `addNewColorPalette.m`、`getColorPalette.m` 与 `monoColor.m` 三个函数的用途、核心流程及常见用法，帮助快速上手并理解它们之间的协作关系。

## addNewColorPalette.m

- **作用**：接收一组 0-255 范围的 RGB 颜色，存入 `customColorPalettes.mat`，并生成一张预览图保存到 `Multi_Color_Map` 目录。
- **输入**：
  - `newRgbColors_0_255`: N x 3 矩阵 (2 <= N <= 10)，每行对应一个 `[R G B]` 值。
- **输出**：
  - `colorPalette`: 将输入矩阵缩放到 0-1 之间后的 N x 3 RGB 矩阵。
- **关键流程**：
  1. 校验矩阵维度与数值范围。
  2. 读取或初始化 `customColorPalettes.mat` 内的历史调色板与最新序号。
  3. 检测是否已存在完全相同的调色板，若已存在则返回原记录并跳过保存。
  4. 将颜色值转换为 0-1 范围，更新结构体数组并持久化到 MAT 文件。
  5. 生成包含折线示例与色块信息的图像，并以 `序号X_Y个颜色.png` 命名保存。
- **典型场景**：需要录入新的配色方案时调用；若传入重复数据，函数会提示原序号并避免冗余记录。

## getColorPalette.m

- **作用**：按照序号从 `customColorPalettes.mat` 中提取已保存的调色板。
- **输入**：
  - `index`: 目标调色板的正整数序号。
- **输出**：
  - `colorPalette`: 对应的 N x 3 RGB 矩阵 (范围 0-1)。
- **关键流程**：
  1. 检查数据文件是否存在，若不存在提示先运行 `addNewColorPalette`。
  2. 加载历史调色板结构体并按序号线性搜索匹配项。
  3. 找到对应序号则返回其 `rgb_0_1` 数据，否则报错提示当前最大序号。
- **典型场景**：在绘图或其他脚本中复用既有调色板时使用，通常结合 `addNewColorPalette` 的返回序号管理颜色方案。

## monoColor.m

- **作用**：提供一套预定义的单色调色，并可在命令行中浏览或按索引获取颜色。
- **输入参数 (可选)**：
  1. `index`: 要获取的颜色编号；省略时函数会绘制全部颜色示意图。
  2. `isrgb`: 逻辑值，`1` 表示返回 0-1 范围内的 RGB 数组，默认返回十六进制字符串。
- **输出**：
  - `color`: 十六进制字符串或 RGB 数组，依据 `isrgb` 而定。
- **关键流程**：
  1. 若未传入索引，函数展示所有预设颜色的图形并将示意图保存为 `常用单颜色(monoColor).png`。
  2. 若提供索引，则在内部颜色表中查找对应的十六进制色值。
  3. 根据 `isrgb` 的取值决定返回形式。
- **典型场景**：快速查询常用色或在脚本中通过索引获取统一的色彩配置。

![常用单颜色](“https://github.com/GeoISPy/Record-colors-used-in-paper-plots/blob/main/%E5%B8%B8%E7%94%A8%E5%8D%95%E9%A2%9C%E8%89%B2(monoColor).png”)

## 协同使用建议

1. 使用 `monoColor` 选择基础色彩，再根据需求组合成矩阵交给 `addNewColorPalette` 进行持久化与预览生成。
2. 在后续绘图或分析脚本中，通过 `getColorPalette` 按序号提取已保存的调色板，确保配色一致性。
3. 若频繁维护调色板，建议定期检查 `Multi_Color_Map` 下的 PNG 预览，以直观验证颜色内容。
